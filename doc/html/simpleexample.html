<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>libfbi: A Simple Example</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="SimpleExample">A Simple Example </a></h1> <h2><a class="anchor" id="A">
Simple Example</a></h2>
<p><code>libfbi</code> was designed to be straightforward and easy to use. In brief, it requires the user to specify a simple adaption layer that is used to call one of two static workhorse functions.</p>
<p>First we have to include libfbi <div class="fragment"><pre class="fragment"><span class="preprocessor">#include &lt;<a class="codeRef" doxygen="libstdc++.tag:http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a01071.html">string</a>&gt;</span>
<span class="preprocessor">#include &quot;fbi/tuplegenerator.h&quot;</span> <span class="comment">//TraitsGenerator</span>
<span class="preprocessor">#include &quot;fbi/fbi.h&quot;</span> <span class="comment">//SetA::intersect</span>
</pre></div></p>
<p>Assume the data consists of a set of structs of type <div class="fragment"><pre class="fragment"><span class="keyword">struct </span>Location {
    <span class="keywordtype">double</span> xPos;
    <span class="keywordtype">double</span> yPos;
    <a class="codeRef" doxygen="libstdc++.tag:http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a01203.html#ga32db3d9898c44d3b3a578b560f7758cc">std::string</a> name;
    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nVisits;
};
</pre></div></p>
<p>A possible suitable container would be <div class="fragment"><pre class="fragment"><a class="codeRef" doxygen="libstdc++.tag:http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a00730.html">std::vector&lt;Location&gt;</a> locations;
</pre></div></p>
<p>Now, assume you would like to know which locations are in walking distance of each other, and that you are willing to walk at most a mile (city block distance). Hence, you draw a rectangle with one mile sides and center it over each location. The task now is to determine for which locations the rectangles overlap, indicating that they are in walking distance.from each other.</p>
<p>Let's define a box operator for the locations. First, we need to define some technical traits (to define the comparison operators, etc). As <code>Location</code> only holds doubles, this is straightforward: just use the <code>TraitsGenerator:</code> </p>
<p><div class="fragment"><pre class="fragment"><span class="keyword">namespace </span>fbi {
  
<span class="keyword">template</span>&lt;&gt;
<span class="keyword">struct </span>Traits&lt;Location&gt; : mpl::TraitsGenerator&lt;double, double&gt; {};

} <span class="comment">//end namespace</span>
</pre></div></p>
<p>Now we can define a box generator for a <code>Location</code> object: <div class="fragment"><pre class="fragment"><span class="keyword">struct </span>LocationBoxGenerator
{
  <span class="keyword">template</span> &lt;<span class="keywordtype">size_t</span> N&gt;
  <span class="keyword">typename</span> std::tuple_element&lt;N, 
    <span class="keyword">typename</span> <a class="codeRef" doxygen="libstdc++.tag:http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a00709.html">fbi::Traits&lt;Location&gt;::key_type</a>&gt;::type 
  <span class="keyword">get</span>(<span class="keyword">const</span> Location&amp;) <span class="keyword">const</span>;

  <span class="keywordtype">double</span> xWidth_;
  <span class="keywordtype">double</span> yWidth_;

  LocationBoxGenerator(<span class="keywordtype">double</span> x, <span class="keywordtype">double</span> y)
    : xWidth_(x), yWidth_(y) {}
};
</pre></div></p>
<p>The template argument <code>N</code> defines the box dimension and we use 0 for x and 1 for y. Specifying the template functions, we get <div class="fragment"><pre class="fragment"><span class="keyword">template</span> &lt;&gt;
<a class="codeRef" doxygen="libstdc++.tag:http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a00269.html">std::pair&lt;double, double&gt;</a>  
LocationBoxGenerator::get&lt;0&gt;(<span class="keyword">const</span> Location&amp; loc) <span class="keyword">const</span> 
{
  <span class="keywordflow">return</span> <a class="codeRef" doxygen="libstdc++.tag:http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a01138.html#a9345a6e2e39831b4291cac2e52a15792">std::make_pair</a>(
    loc.xPos - xWidth_ / 2, loc.xPos + xWidth_ / 2);
}
</pre></div></p>
<p>for the x dimension and</p>
<p><div class="fragment"><pre class="fragment"><span class="keyword">template</span> &lt;&gt;
<a class="codeRef" doxygen="libstdc++.tag:http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a00269.html">std::pair&lt;double, double&gt;</a>  
LocationBoxGenerator::get&lt;1&gt;(<span class="keyword">const</span> Location&amp; loc) <span class="keyword">const</span> 
{
  <span class="keywordflow">return</span> <a class="codeRef" doxygen="libstdc++.tag:http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/" href="http://gcc.gnu.org/onlinedocs/libstdc++/latest-doxygen/a01138.html#a9345a6e2e39831b4291cac2e52a15792">std::make_pair</a>(
    loc.yPos - yWidth_ / 2, loc.yPos + yWidth_ / 2);
}
</pre></div></p>
<p>for the y dimension. Determining the adjacency list that holds the indexes of all elements whose boxes intersect is then a simple matter of calling the single set intersection function</p>
<p><div class="fragment"><pre class="fragment"><span class="keywordtype">int</span> main() {
  <span class="keyword">auto</span> adjList = <a class="code" href="classfbi_1_1_set_a.html" title="A class to find intersections between cartesian products of arbitrarily-typed intervals...">fbi::SetA&lt;Location, 0, 1&gt;::intersect</a>(
    locations, LocationBoxGenerator(0.5, 0.5), LocationBoxGenerator(0.5, 0.5));
}
</pre></div></p>
<p>The resulting adjecency list can subsequently be used to calucate connected components or similar. </p>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Friends</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on Thu Dec 23 10:01:51 2010 for libfbi by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
